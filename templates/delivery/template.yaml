version: 1
name: delivery
displayName: Delivery Pipeline
description: Pipeline for building, scanning, and publishing a container image
type: pipeline-template
parameters:
  - name: default_image
    displayName: Image
    description: The fully qualified container image name (including the registry).
    type: string
    defaultValue: "docker.io/my-app"
  - name: default_tag
    displayName: Image Tag
    type: string
    defaultValue: "latest"
  - name: registry_credentials
    displayName: Registry Credentials
    type: credentials
  - name: default_build_args
    displayName: Build Arguments
    description: "A JSON object of build arguments to pass to the container build process."
    type: string
    default: "{}"
  - name: default_build_dir
    displayName: Build Directory
    description: "The directory to use as the build context for the container build."
    type: string
    default: "."
  - name: default_dockerfile
    displayName: Dockerfile
    type: string
    default: "Dockerfile"
  - name: default_build_target
    displayName: Build Target
    description: "The build target to use when building the container image (for use with multi-stage Dockerfiles)."
    type: string
  - name: default_platform
    displayName: Platform
    description: "A comma separated list of platforms to build the container image for (e.g., linux/amd64,linux/arm64)."
    type: string
    default: "linux/amd64"
  - name: enable_ansi_colors
    displayName: Enable ANSI Colors
    description: "Enable ANSI colors in the build output (requires AnsiColor plugin)."
    type: boolean
    default: true
